@model VisingPackSolution.ViewModels.MachineState.MsPrintingVM


<div class="row">
    <div class="col-xl-3 col-md-6">
        <div class="card bg-primary text-white mb-4">
            <div class="card-body">Printing 601</div>
            <div class="card-footer ">
                <div class="row">
                    <div class="col-8">
                        Num of prod changes
                    </div>
                    @Html.Label(Model.P601ProductCodeChangeCount.ToString())
                </div>
                <div class="row">
                    <div class="col-8">
                        Total Job
                    </div>
                    @Html.Label(Model.P601JobCount.ToString())
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card bg-warning text-white mb-4">
            <div class="card-body">Printing 604</div>
            <div class="card-footer ">
                <div class="row">
                    <div class="col-8">
                        Num of prod changes
                    </div>
                    @Html.Label(Model.P604ProductCodeChangeCount.ToString())
                </div>
                <div class="row">
                    <div class="col-8">
                        Total Job
                    </div>
                    @Html.Label(Model.P604JobCount.ToString())
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card bg-success text-white mb-4">
            <div class="card-body">Printing 605</div>
            <div class="card-footer ">
                <div class="row">
                    <div class="col-8">
                        Num of prod changes
                    </div>
                    @Html.Label(Model.P605ProductCodeChangeCount.ToString())
                </div>
                <div class="row">
                    <div class="col-8">
                        Total Job
                    </div>
                    @Html.Label(Model.P605JobCount.ToString())
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card bg-danger text-white mb-4">
            <div class="card-body">Printing 5M</div>
            <div class="card-footer ">
                <div class="row">
                    <div class="col-8">
                        Num of prod changes
                    </div>
                    @Html.Label(Model.P5MProductCodeChangeCount.ToString())
                </div>
                <div class="row">
                    <div class="col-8">
                        Total Job
                    </div>
                    @Html.Label(Model.P5MJobCount.ToString())
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-xl-6">
        <div class="card mb-4">
            <div class="card-header">
                Speed
            </div>
            <div class="card-body" style="height:500px">
                <div id="chartContainer" width="100%" height="500"></div>
            </div>
        </div>
    </div>
    <div class="col-xl-3">
        <div class="row-cols-1">
            <div class="card mb-5">
                <div class="card-header">
                    <i class="fas fa-table mr-1"></i>
                    P601
                </div>
                <div class="card-body">
                    <div class="table-responsive" style="height: 200px; overflow: auto;">
                        <table class="table table-bordered" id="table1">
                            <thead>
                                <tr>
                                    <th>
                                        Datetime
                                    </th>
                                    <th>
                                        State
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.P601Events)
                                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Datetime)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Event)
                        </td>
                    </tr>
}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card mb-5">
                <div class="card-header">
                    <i class="fas fa-table mr-1"></i>
                    P605
                </div>
                <div class="card-body">
                    <div class="table-responsive" style="height: 200px; overflow: auto;">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>
                                        Datetime
                                    </th>
                                    <th>
                                        State
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.P605Events)
                                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Datetime)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Event)
                        </td>
                    </tr>
}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="col-xl-3">
        <div class="card mb-5">
            <div class="card-header">
                <i class="fas fa-table mr-1"></i>
                P604
            </div>
            <div class="card-body">
                <div class="table-responsive" style="height: 200px; overflow: auto;">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>
                                    Datetime
                                </th>
                                <th>
                                    State
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.P604Events)
                            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Datetime)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Event)
                    </td>
                </tr>
}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="card mb-5">
            <div class="card-header">
                <i class="fas fa-table mr-1"></i>
                P5M
            </div>
            <div class="card-body">
                <div class="table-responsive" style="height: 200px; overflow: auto;">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>
                                    Datetime
                                </th>
                                <th>
                                    State
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.P5MEvents)
                            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Datetime)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Event)
                    </td>
                </tr>}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    function onload() {
                var p601Result = @Html.Raw(ViewBag.P601SpeedDataPoints);
                var p604Result = @Html.Raw(ViewBag.P604SpeedDataPoints);
                var p605Result = @Html.Raw(ViewBag.P605SpeedDataPoints);
                var p5MResult = @Html.Raw(ViewBag.P5MSpeedDataPoints);

                var p601SpeedDataPoints = [];
                var p604SpeedDataPoints = [];
                var p605SpeedDataPoints = [];
                var p5MSpeedDataPoints = [];

                for (var i = 0; i < p601Result.length; i++){
                    p601SpeedDataPoints.push({ label: p601Result[i].Datetime, y: p601Result[i].Speed });
                }
                for (var i = 0; i < p604Result.length; i++) {
                    p604SpeedDataPoints.push({ label: p604Result[i].Datetime, y: p604Result[i].Speed });
                }
                for (var i = 0; i < p605Result.length; i++) {
                    p605SpeedDataPoints.push({ label: p605Result[i].Datetime, y: p605Result[i].Speed });
                }
                for (var i = 0; i < p5MResult.length; i++) {
                    p5MSpeedDataPoints.push({ label: p5MResult[i].Datetime, y: p5MResult[i].Speed });
                }

                var chart = new CanvasJS.Chart("chartContainer",
                    {
                        zoomEnabled: true,
                        zoomType: "xy",
                        //title: {
                        //    text: "Speed",
                        //},
                        axisY: {
                            title: "pcs/h",
                        },
                        legend: {
                            horizontalAlign: "right",
                            verticalAlign: "center",
                            cursor: "pointer",
                            itemclick: function (e) {
                                if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                                    e.dataSeries.visible = false;
                                } else {
                                    e.dataSeries.visible = true;
                                }

                                e.chart.render();
                            },
                        },
                        data: [
                            {
                                type: "line",
                                //lineColor: "#007BFF",
                                //markerColor: "#007BFF",
                                //legendMarkerColor: "#007BFF",
                                xValueType: "dateTime",
                                yValueFormatString: "#####.0",
                                showInLegend: true,
                                name: "P601",
                                dataPoints: p601SpeedDataPoints
                            },
                            {
                                type: "line",
                                //lineColor: "#FFC107",
                                //markerColor: "#FFC107",
                                //legendMarkerColor: "#FFC107",
                                xValueType: "dateTime",
                                xValueFormatString: "dd/MM/yyyy",
                                yValueFormatString: "#####.0",
                                showInLegend: true,
                                name: "P604",
                                dataPoints: p604SpeedDataPoints
                            },
                            {
                                type: "line",
                                //lineColor: "#28A745",
                                //markerColor: "#28A745",
                                //legendMarkerColor: "#28A745",
                                xValueType: "dateTime",
                                xValueFormatString: "dd/MM/yyyy",
                                yValueFormatString: "#####.0",
                                showInLegend: true,
                                name: "P605",
                                dataPoints: p605SpeedDataPoints
                            },
                            {
                                type: "line",
                                //lineColor: "#DC3545",
                                //markerColor: "#DC3545",
                                //legendMarkerColor: "#DC3545",
                                xValueType: "dateTime",
                                xValueFormatString: "dd/MM/yyyy",
                                yValueFormatString: "#####.0",
                                showInLegend: true,
                                name: "P5M",
                                dataPoints: p5MSpeedDataPoints
                            },
                        ]

                    });

                chart.render();
            }

</script>


